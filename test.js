const data = {
  ref: 'refs/heads/main',
  before: '73294107f791eef82f74c1fdb9aae20205a5f8c8',
  after: '6eb56c214253c7fd0664d4e84c84fe43e967191c',
  repository: {
    id: 1016614969,
    node_id: 'R_kgDOPJhQOQ',
    name: 'code_reviewer',
    full_name: 'Nicksm930/code_reviewer',
    private: false,
    owner: {
      name: 'Nicksm930',
      email: '91065274+Nicksm930@users.noreply.github.com',
      login: 'Nicksm930',
      id: 91065274,
      node_id: 'MDQ6VXNlcjkxMDY1Mjc0',
      avatar_url: 'https://avatars.githubusercontent.com/u/91065274?v=4',
      gravatar_id: '',
      url: 'https://api.github.com/users/Nicksm930',
      html_url: 'https://github.com/Nicksm930',
      followers_url: 'https://api.github.com/users/Nicksm930/followers',
      following_url: 'https://api.github.com/users/Nicksm930/following{/other_user}',
      gists_url: 'https://api.github.com/users/Nicksm930/gists{/gist_id}',
      starred_url: 'https://api.github.com/users/Nicksm930/starred{/owner}{/repo}',
      subscriptions_url: 'https://api.github.com/users/Nicksm930/subscriptions',
      organizations_url: 'https://api.github.com/users/Nicksm930/orgs',
      repos_url: 'https://api.github.com/users/Nicksm930/repos',
      events_url: 'https://api.github.com/users/Nicksm930/events{/privacy}',
      received_events_url: 'https://api.github.com/users/Nicksm930/received_events',
      type: 'User',
      user_view_type: 'public',
      site_admin: false
    },
    html_url: 'https://github.com/Nicksm930/code_reviewer',
    description: null,
    fork: false,
    url: 'https://api.github.com/repos/Nicksm930/code_reviewer',
    forks_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/forks',
    keys_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/keys{/key_id}',
    collaborators_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/collaborators{/collaborator}',
    teams_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/teams',
    hooks_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/hooks',
    issue_events_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/issues/events{/number}',
    events_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/events',
    assignees_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/assignees{/user}',
    branches_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/branches{/branch}',
    tags_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/tags',
    blobs_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/git/blobs{/sha}',
    git_tags_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/git/tags{/sha}',
    git_refs_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/git/refs{/sha}',
    trees_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/git/trees{/sha}',
    statuses_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/statuses/{sha}',
    languages_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/languages',
    stargazers_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/stargazers',
    contributors_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/contributors',
    subscribers_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/subscribers',
    subscription_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/subscription',
    commits_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/commits{/sha}',
    git_commits_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/git/commits{/sha}',
    comments_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/comments{/number}',
    issue_comment_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/issues/comments{/number}',
    contents_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/contents/{+path}',
    compare_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/compare/{base}...{head}',
    merges_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/merges',
    archive_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/{archive_format}{/ref}',
    downloads_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/downloads',
    issues_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/issues{/number}',
    pulls_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/pulls{/number}',
    milestones_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/milestones{/number}',
    notifications_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/notifications{?since,all,participating}',
    labels_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/labels{/name}',
    releases_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/releases{/id}',
    deployments_url: 'https://api.github.com/repos/Nicksm930/code_reviewer/deployments',
    created_at: 1752052546,
    updated_at: '2025-07-10T11:06:50Z',
    pushed_at: 1752146783,
    git_url: 'git://github.com/Nicksm930/code_reviewer.git',
    ssh_url: 'git@github.com:Nicksm930/code_reviewer.git',
    clone_url: 'https://github.com/Nicksm930/code_reviewer.git',
    svn_url: 'https://github.com/Nicksm930/code_reviewer',
    homepage: null,
    size: 0,
    stargazers_count: 0,
    watchers_count: 0,
    language: 'TypeScript',
    has_issues: true,
    has_projects: true,
    has_downloads: true,
    has_wiki: true,
    has_pages: false,
    has_discussions: false,
    forks_count: 0,
    mirror_url: null,
    archived: false,
    disabled: false,
    open_issues_count: 0,
    license: null,
    allow_forking: true,
    is_template: false,
    web_commit_signoff_required: false,
    topics: [],
    visibility: 'public',
    forks: 0,
    open_issues: 0,
    watchers: 0,
    default_branch: 'main',
    stargazers: 0,
    master_branch: 'main'
  },
  pusher: {
    name: 'Nicksm930',
    email: '91065274+Nicksm930@users.noreply.github.com'
  },
  sender: {
    login: 'Nicksm930',
    id: 91065274,
    node_id: 'MDQ6VXNlcjkxMDY1Mjc0',
    avatar_url: 'https://avatars.githubusercontent.com/u/91065274?v=4',
    gravatar_id: '',
    url: 'https://api.github.com/users/Nicksm930',
    html_url: 'https://github.com/Nicksm930',
    followers_url: 'https://api.github.com/users/Nicksm930/followers',
    following_url: 'https://api.github.com/users/Nicksm930/following{/other_user}',
    gists_url: 'https://api.github.com/users/Nicksm930/gists{/gist_id}',
    starred_url: 'https://api.github.com/users/Nicksm930/starred{/owner}{/repo}',
    subscriptions_url: 'https://api.github.com/users/Nicksm930/subscriptions',
    organizations_url: 'https://api.github.com/users/Nicksm930/orgs',
    repos_url: 'https://api.github.com/users/Nicksm930/repos',
    events_url: 'https://api.github.com/users/Nicksm930/events{/privacy}',
    received_events_url: 'https://api.github.com/users/Nicksm930/received_events',
    type: 'User',
    user_view_type: 'public',
    site_admin: false
  },
  created: false,
  deleted: false,
  forced: false,
  base_ref: null,
  compare: 'https://github.com/Nicksm930/code_reviewer/compare/73294107f791...6eb56c214253',
  commits: [
    {
      id: '6eb56c214253c7fd0664d4e84c84fe43e967191c',
      tree_id: '374cf739d12d6803f0f5cc5f13f433f7c6c1f32a',
      distinct: true,
      message: 'hooks commit',
      timestamp: '2025-07-10T16:57:16+05:30',
      url: 'https://github.com/Nicksm930/code_reviewer/commit/6eb56c214253c7fd0664d4e84c84fe43e967191c',
      author: [Object],
      committer: [Object],
      added: [],
      removed: [],
      modified: [Array]
    }
  ],
  head_commit: {
    id: '6eb56c214253c7fd0664d4e84c84fe43e967191c',
    tree_id: '374cf739d12d6803f0f5cc5f13f433f7c6c1f32a',
    distinct: true,
    message: 'hooks commit',
    timestamp: '2025-07-10T16:57:16+05:30',
    url: 'https://github.com/Nicksm930/code_reviewer/commit/6eb56c214253c7fd0664d4e84c84fe43e967191c',
    author: {
      name: 'nikhilsm930',
      email: 'nikhilsm930@gmail.com',
      username: 'Nicksm930'
    },
    committer: {
      name: 'nikhilsm930',
      email: 'nikhilsm930@gmail.com',
      username: 'Nicksm930'
    },
    added: [],
    removed: [],
    modified: ['src/app.controller.ts', 'src/app.service.ts']
  }
}

// async reviewWithGemini(payload: ReviewPayloadItem[]) {

//     this.customLogger.log(`Started Reviewing with Gemini-Flash-2.0`);

//     const reviews: Record<string, any> = {};

//     for (const file of payload) {
//         const prompt = `
//                 You are an expert TypeScript code reviewer tasked with reviewing and auditing the code in a provided file. Your goal is to identify issues, suggest improvements, and provide comments on code quality, readability, potential bugs, and best practices according to TypeScript and relevant frameworks.

//                 You will be given the following information:
//                 1. The filename
//                 2. A diff of the changes
//                 3. The previous version of the code
//                 4. The current version of the code

//                 Here is the file information:

//                 <filename>${file.filename}</filename>

//                 Review the following changes:

//                 <diff>
//                 \`\`\`diff
//                 ${file.patch}
//                 \`\`\`
//                 </diff>

//                 Previous code:
//                 <previous_code>
//                 \`\`\`ts
//                 ${file.previousCode}
//                 \`\`\`
//                 </previous_code>

//                 Current code:
//                 <current_code>
//                 \`\`\`ts
//                 ${file.code}
//                 \`\`\`
//                 </current_code>

//                 Instructions for reviewing the code:
//                 1. Carefully examine the diff, previous code, and current code.
//                 2. Identify any issues, potential improvements, or noteworthy aspects of the code.
//                 3. Focus on:
//                 - Code quality
//                 - Readability
//                 - Potential bugs
//                 - Adherence to TypeScript best practices
//                 - Proper use of relevant frameworks (if applicable)
//                 4. For each comment, try to provide the approximate line number where the issue or improvement is located.
//                 5. Be specific and constructive in your feedback.

//                 Provide your review in the following JSON format:
//                 Your final output should consist of ONLY the JSON object below — no extra commentary, formatting, or markdown:
//                 <output_format>
//                 {
//                 "filename": "The name of the file",
//                 "comments": [
//                     { "line": 123, "comment": "Your comment here." }
//                 ]
//                 }
//                 </output_format>

//                 Your final output should consist of only the JSON object containing the filename and comments. Do not include any additional text, explanations, or formatting outside of this JSON structure.
//                 `;
//         try {
//             const result = await this.model.generateContent(prompt);
//             const text = await result.response.text();
//             const match = text.match(/```json\s*([\s\S]+?)```/i);
//             const jsonText = match ? match[1] : text;
//             const parsed = this.safeJSONParse(jsonText);

//             if (parsed?.comments && Array.isArray(parsed.comments)) {
//                 reviews[file.filename] = parsed.comments;
//             } else {
//                 this.customLogger.warn(`No comments found in AI output for ${file.filename}`);
//                 reviews[file.filename] = [];
//             }


//             setTimeout(() => {
//                 this.customLogger.debug(`Generated AI Review for file: ${file.filename}`)
//             }, 5000)
//         } catch (err) {
//             console.error(`Error reviewing ${file.filename}:`, err);
//             reviews[file.filename] = [
//                 { line: 0, comment: "AI review failed or quota exceeded." },
//             ];
//         }
//     }
//     this.customLogger.log(`Successfully completed Reviews`)
//     return reviews;
// }